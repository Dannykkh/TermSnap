# Linux Server AI Assistant 완벽 사용 가이드

## 📚 목차

1. [시작하기](#1-시작하기)
2. [서버 프로필 관리](#2-서버-프로필-관리)
3. [AI 명령어 실행](#3-ai-명령어-실행)
4. [명령어 스니펫](#4-명령어-스니펫)
5. [서버 메모 활용](#5-서버-메모-활용)
6. [고급 기능](#6-고급-기능)
7. [팁과 요령](#7-팁과-요령)
8. [문제 해결](#8-문제-해결)

---

## 1. 시작하기

### 1.1 첫 실행

프로그램을 처음 실행하면 초기 설정이 필요합니다.

```
┌─────────────────────────────────────┐
│ Linux Server AI Assistant           │
├─────────────────────────────────────┤
│ 환영합니다!                          │
│ 먼저 설정 버튼을 눌러 서버 프로필을  │
│ 생성해주세요.                        │
└─────────────────────────────────────┘

[연결] [연결 해제] [프로필 전환] [스니펫] [설정]
```

### 1.2 Gemini API 키 설정

1. [Google AI Studio](https://aistudio.google.com/app/apikey) 접속
2. Google 계정으로 로그인
3. "Create API Key" 클릭
4. 생성된 API 키 복사
5. 프로그램의 **[설정]** → **Gemini API Key** 입력

```
💡 API 키는 Windows DPAPI로 암호화되어 안전하게 저장됩니다.
```

### 1.3 첫 서버 프로필 만들기

**[설정]** 버튼 클릭 후:

#### 프로필 정보
```
프로필 이름: 개발 서버
☑ 즐겨찾기에 추가
```

#### SSH 서버 설정
```
서버 주소: 192.168.1.100
포트: 22
사용자 이름: user
```

#### 인증 방식 선택

**방식 1: 비밀번호**
```
인증 방식: [비밀번호 ▼]
비밀번호: ********

✅ 비밀번호는 암호화되어 저장됩니다.
```

**방식 2: SSH 키**
```
인증 방식: [SSH 키 (Private Key) ▼]
SSH 키 파일: C:\Users\me\.ssh\id_rsa  [찾기]
Passphrase: ********  (있는 경우)

✅ Passphrase도 암호화되어 저장됩니다.
```

#### 서버 메모
```
메모:
MySQL 접속:
- host: localhost
- user: root
- password: mysql_pass_123

중요 경로:
- 웹루트: /var/www/html
- 로그: /var/log/nginx
```

#### 저장
1. **[연결 테스트]** 버튼으로 연결 확인
2. **[저장]** 클릭

---

## 2. 서버 프로필 관리

### 2.1 여러 서버 관리

PuTTY처럼 여러 서버를 프로필로 저장하고 쉽게 전환할 수 있습니다.

```
프로필 예시:
┌──────────────────────────────────┐
│ ⭐ 개발 서버                      │
│    user@192.168.1.100:22        │
│    마지막 연결: 2024-11-17 14:30 │
├──────────────────────────────────┤
│ 📡 프로덕션 서버                  │
│    admin@prod.example.com:22    │
│    마지막 연결: 2024-11-16 09:15 │
├──────────────────────────────────┤
│ 🔧 테스트 서버                    │
│    test@test.local:2222         │
│    마지막 연결: 2024-11-15 16:20 │
└──────────────────────────────────┘
```

### 2.2 프로필 연결

#### 하나의 프로필만 있는 경우
```
[연결] 클릭 → 자동으로 연결
```

#### 여러 프로필이 있는 경우
```
[연결] 클릭 → 프로필 선택 창
→ 원하는 프로필 선택 → [선택]
```

### 2.3 프로필 전환

현재 연결 중에도 다른 프로필로 전환 가능:

```
[프로필 전환] 클릭
→ "현재 연결을 끊고 전환하시겠습니까?"
→ [예] → 프로필 선택
```

### 2.4 즐겨찾기 활용

자주 쓰는 서버는 즐겨찾기로 설정:

```
설정 → ☑ 즐겨찾기에 추가

효과:
- 프로필 목록 상단에 표시 (⭐ 아이콘)
- 마지막 사용 프로필이 없으면 자동 선택
```

---

## 3. AI 명령어 실행

### 3.1 기본 사용법

연결 후 자연어로 원하는 작업을 입력하세요.

```
┌─────────────────────────────────────┐
│ 사용자: 메모리 사용량 확인해줘        │
├─────────────────────────────────────┤
│ AI: 생성된 명령어: free -h           │
│ AI: ✓ 성공                           │
│              total   used    free    │
│ Mem:         7.8G    2.1G    3.2G    │
└─────────────────────────────────────┘

[원하는 작업을 입력하세요...]  [전송]
```

### 3.2 자연어 명령어 예시

#### 시스템 관리
```
✅ "디스크 사용량 확인해줘"
→ df -h

✅ "CPU 사용률 높은 프로세스 10개"
→ ps aux --sort=-%cpu | head -n 11

✅ "시스템 업타임 보여줘"
→ uptime
```

#### 파일 관리
```
✅ "현재 디렉토리에서 큰 파일 상위 5개"
→ ls -lhS | head -n 6

✅ "7일 이상 된 로그 파일 찾기"
→ find /var/log -name "*.log" -mtime +7

✅ "tmp 폴더 용량 확인"
→ du -sh /tmp
```

#### 서비스 관리
```
✅ "nginx 상태 확인"
→ systemctl status nginx

✅ "apache2 재시작"
→ sudo systemctl restart apache2

✅ "자동 시작되는 서비스 목록"
→ systemctl list-unit-files --state=enabled
```

#### 네트워크
```
✅ "열린 포트 확인"
→ sudo netstat -tlnp

✅ "외부 IP 주소 알려줘"
→ curl -s ifconfig.me

✅ "80번 포트 사용하는 프로세스"
→ sudo lsof -i :80
```

#### 로그 분석
```
✅ "nginx 에러 로그 마지막 50줄"
→ sudo tail -n 50 /var/log/nginx/error.log

✅ "시스템 로그에서 error 찾기"
→ sudo journalctl -p err -n 50

✅ "실패한 로그인 시도 확인"
→ sudo grep "Failed password" /var/log/auth.log | tail -n 20
```

### 3.3 복잡한 작업

여러 단계가 필요한 작업도 한 번에:

```
입력: "nginx 설정 테스트하고 재시작한 다음 상태 확인해줘"

AI: nginx -t && sudo systemctl restart nginx && systemctl status nginx
```

### 3.4 자동 오류 처리

명령어 실행 중 오류가 발생하면 AI가 자동으로 수정을 시도합니다.

```
시도 1: cat /var/log/nginx/access.log
오류: Permission denied

AI가 오류 분석 중...

시도 2: sudo cat /var/log/nginx/access.log
✓ 성공!
```

**최대 재시도 횟수**: 설정에서 조정 가능 (기본 3회)

### 3.5 위험한 명령어 보호

시스템에 위험할 수 있는 명령어는 자동으로 차단됩니다.

```
❌ 차단되는 명령어:
- rm -rf /
- dd if=/dev/zero
- mkfs
- chmod -R 777 /
- Fork bomb
```

**확인이 필요한 명령어** (실행 전 물어봄):
```
⚠️ 확인 필요:
- rm (파일 삭제)
- sudo (관리자 권한)
- systemctl stop/restart
- reboot / shutdown
- kill / pkill
- apt-get remove / yum remove
```

---

## 4. 명령어 스니펫

### 4.1 스니펫이란?

자주 사용하는 명령어를 저장하고 빠르게 재사용하는 기능입니다.

```
💡 AI 대신 스니펫을 사용하면:
✅ 즉시 실행 (AI 생성 시간 불필요)
✅ API 할당량 절약
✅ 복잡한 명령어 쉽게 관리
```

### 4.2 기본 제공 스니펫 (11개)

프로그램 설치 시 기본으로 제공:

#### 시스템 (3개)
```
1. 시스템 정보
   → uname -a && cat /etc/os-release && free -h && lscpu

2. 디스크 사용량
   → df -h

3. 메모리 사용량
   → free -h
```

#### 프로세스 (2개)
```
4. CPU 많이 쓰는 프로세스
   → ps aux --sort=-%cpu | head -n 11

5. 메모리 많이 쓰는 프로세스
   → ps aux --sort=-%mem | head -n 11
```

#### 네트워크 (2개)
```
6. 열린 포트 확인
   → sudo netstat -tlnp

7. 외부 IP 확인
   → curl -s ifconfig.me
```

#### 로그 (2개)
```
8. 시스템 로그 (최근 50줄)
   → sudo journalctl -n 50 --no-pager

9. 인증 실패 로그
   → sudo grep 'Failed password' /var/log/auth.log | tail -n 20
```

#### Docker (2개)
```
10. Docker 컨테이너 목록
    → docker ps

11. Docker 이미지 목록
    → docker images
```

### 4.3 스니펫 사용하기

#### 방법 1: 스니펫 관리 창
```
[스니펫] 버튼 클릭
→ 목록에서 원하는 스니펫 더블클릭
→ 실행 확인
```

#### 방법 2: 검색해서 사용
```
[스니펫] 클릭
→ 검색창에 "디스크" 입력
→ "디스크 사용량" 스니펫 선택
→ 실행
```

#### 방법 3: 카테고리 필터
```
[스니펫] 클릭
→ 카테고리: [시스템 ▼]
→ 시스템 관련 스니펫만 표시
```

### 4.4 새 스니펫 만들기

자주 쓰는 명령어를 스니펫으로 저장:

```
[스니펫] → [새 스니펫]

이름: Nginx 재시작 및 상태 확인
설명: Nginx를 재시작하고 상태를 확인합니다
명령어: sudo systemctl restart nginx && systemctl status nginx
카테고리: 웹서버
태그: nginx, 재시작, 상태

[저장]
```

### 4.5 스니펫 편집

```
[스니펫] → 스니펫 선택 → [편집]
→ 내용 수정 → [저장]
```

### 4.6 스니펫 검색

강력한 검색 기능으로 원하는 스니펫 빠르게 찾기:

```
검색 범위:
- 이름
- 설명
- 명령어
- 태그

예시:
"docker" 검색 → Docker 관련 모든 스니펫
"nginx" 검색 → Nginx 관련 모든 스니펫
"로그" 검색 → 로그 관련 모든 스니펫
```

### 4.7 사용 통계

스니펫은 사용할 때마다 통계가 자동으로 기록됩니다:

```
- 사용 횟수
- 마지막 사용 시간

활용:
- 자주 쓰는 스니펫 파악
- 불필요한 스니펫 정리
```

---

## 5. 서버 메모 활용

### 5.1 메모 기능이란?

각 서버 프로필에 중요한 정보를 메모로 저장할 수 있습니다.

```
💡 메모에 저장하기 좋은 정보:
✅ 데이터베이스 접속 정보
✅ Redis, MongoDB 연결 정보
✅ 중요 디렉토리 경로
✅ 서버 담당자 연락처
✅ 백업 위치 및 방법
✅ 특이사항 및 주의사항
```

### 5.2 메모 작성하기

```
[설정] → 프로필 정보 → 메모

예시:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
MySQL 접속 정보:
- Host: localhost
- Port: 3306
- User: root
- Password: mysql_pass_123
- Database: main_db

Redis:
- Host: localhost:6379
- Password: redis_pass_456

중요 경로:
- 웹루트: /var/www/html
- 백업: /backup/daily
- 로그: /var/log/app

담당자:
- 개발팀장: 홍길동 (010-1234-5678)
- 운영팀: ops@company.com

주의사항:
- 매주 월요일 03:00 자동 재시작
- 디스크 사용률 80% 초과 시 알림
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 5.3 메모 활용 예시

#### 시나리오: 데이터베이스 백업

```
1. 서버 연결
2. [설정] → 메모 확인
3. MySQL 접속 정보 복사
4. AI에게: "메모에 있는 정보로 MySQL 백업해줘"
   (또는 수동으로 명령어 작성)
```

#### 시나리오: 신규 팀원 온보딩

```
새 팀원에게:
"[설정]에서 프로필 메모를 확인하세요.
모든 접속 정보와 중요 경로가 정리되어 있습니다."
```

### 5.4 메모 보안

```
⚠️ 주의사항:
메모는 평문으로 저장됩니다.
민감한 정보는 주의해서 저장하세요.

권장:
- 프로덕션 서버의 민감한 비밀번호는 암호 관리자 사용
- 메모에는 힌트나 참조 정보만 저장
- 설정 파일 접근 권한 제한
```

---

## 6. 고급 기능

### 6.1 SSH 키 + Passphrase

```
설정:
인증 방식: [SSH 키 ▼]
SSH 키 파일: ~/.ssh/id_rsa
Passphrase: ********

✅ Passphrase는 암호화되어 안전하게 저장
```

### 6.2 여러 프로필 빠른 전환

```
워크플로우:
09:00 - [개발 서버] 연결
      → 개발 작업
11:00 - [프로필 전환] → [테스트 서버]
      → 테스트 진행
14:00 - [프로필 전환] → [프로덕션 서버]
      → 배포 및 모니터링
```

### 6.3 스니펫 + AI 조합

```
복잡한 작업:
1. 스니펫으로 기본 정보 수집
   - 디스크 사용량
   - 메모리 상태
   - 프로세스 목록

2. AI에게 분석 요청
   "위 정보를 바탕으로 최적화 방안 제시해줘"
```

### 6.4 프로필별 설정

```
각 프로필마다 별도로 저장:
- 접속 정보
- 인증 방법
- 메모
- 즐겨찾기 여부
- 연결 이력
```

### 6.5 설정 백업 및 복원

```
설정 파일 위치:
C:\Users\[사용자]\AppData\Roaming\LinuxServerAI\config.json

백업:
1. 프로그램 종료
2. config.json 복사
3. 안전한 곳에 보관

복원:
1. 프로그램 종료
2. 백업한 config.json 복사
3. 프로그램 실행
```

---

## 7. 팁과 요령

### 7.1 효율적인 명령어 요청

#### ❌ 나쁜 예
```
"뭔가 이상해"
"확인해줘"
"삭제해줘"
```

#### ✅ 좋은 예
```
"nginx 오류 로그에서 오늘 발생한 500 에러를 찾아줘"
"tmp 폴더에서 7일 이상 된 파일들 삭제해줘"
"CPU 사용률이 80% 이상인 프로세스와 해당 명령어 찾아줘"
```

### 7.2 AI vs 스니펫 선택

| 상황 | 추천 | 이유 |
|------|------|------|
| 처음 하는 작업 | AI | 명령어를 모를 때 |
| 자주 반복하는 작업 | 스니펫 | 빠르고 정확 |
| 복잡한 분석 필요 | AI | 상황에 맞는 명령어 생성 |
| 간단한 확인 작업 | 스니펫 | API 절약 |

### 7.3 스니펫 정리 전략

```
카테고리 구분:
- 시스템: 기본 시스템 정보
- 모니터링: 상태 확인 명령어
- 웹서버: Nginx, Apache 관련
- 데이터베이스: MySQL, PostgreSQL 관련
- Docker: 컨테이너 관리
- 백업: 백업 및 복원
- 보안: 로그 분석, 보안 점검
```

### 7.4 메모 작성 템플릿

```markdown
# [서버 이름] 정보

## 접속 정보
- MySQL: root@localhost:3306 / password
- Redis: localhost:6379 / password
- MongoDB: localhost:27017 / password

## 중요 경로
- 웹루트: /var/www/html
- 백업: /backup
- 로그: /var/log/app

## 담당자
- 개발: 홍길동 (010-1234-5678)
- 운영: ops@company.com

## 특이사항
- 매주 월요일 03:00 자동 재시작
- 백업 보관 기간: 30일

## 긴급 연락처
- IDC: 02-1234-5678
- 네트워크: 010-9876-5432
```

### 7.5 단계별 작업 진행

복잡한 작업은 단계별로:

```
❌ 한 번에:
"서버 최적화하고 불필요한 파일 삭제하고 서비스 재시작해줘"

✅ 단계별로:
1. "현재 디스크 사용량 확인해줘"
2. "100MB 이상 파일 중 7일 이상 안 쓴 거 찾아줘"
3. "확인 후 삭제" (신중하게)
4. "서비스 재시작 전 설정 테스트"
5. "문제없으면 재시작"
```

### 7.6 프로필 네이밍 규칙

```
명확한 이름 사용:
✅ "개발 서버 (AWS Seoul)"
✅ "프로덕션 웹서버 1"
✅ "테스트 DB 서버"

❌ "서버1", "test", "my server"
```

---

## 8. 문제 해결

### 8.1 연결 문제

#### 문제: "SSH 연결 실패"
```
확인사항:
1. 서버 IP/포트가 올바른지
2. 방화벽에서 SSH 포트 허용되는지
3. 서버에서 SSH 서비스 실행 중인지
   → ssh user@server 명령으로 직접 테스트

해결:
[설정] → [연결 테스트] 로 문제 파악
```

#### 문제: "Permission denied"
```
원인:
- 비밀번호 오류
- SSH 키 권한 문제
- 서버에서 해당 사용자 SSH 허용 안함

해결:
1. 비밀번호 재확인
2. SSH 키 파일 권한 확인 (600)
3. 서버의 /etc/ssh/sshd_config 확인
```

### 8.2 API 문제

#### 문제: "Gemini API 오류: 403"
```
원인:
- API 키가 잘못됨
- API 키 만료

해결:
1. API 키 재확인
2. 필요시 새 API 키 생성
3. [설정]에서 API 키 업데이트
```

#### 문제: "API 할당량 초과"
```
무료 플랜 제한:
- 분당: 60회
- 일일: 1,000회

해결:
1. 스니펫 활용으로 API 사용 줄이기
2. 자주 쓰는 명령어는 모두 스니펫으로
3. 필요시 유료 플랜 고려
```

### 8.3 명령어 실행 문제

#### 문제: sudo 명령어 실행 안됨
```
원인:
SSH 사용자에게 sudo 권한이 없음

확인:
서버에서 sudo -l 명령으로 권한 확인

해결:
서버 관리자에게 sudo 권한 요청
```

#### 문제: 명령어가 이상하게 생성됨
```
개선 방법:
1. 더 구체적으로 요청
2. 명령어 실행 전 확인
3. 필요시 수동으로 수정 후 실행
4. 잘 작동하면 스니펫으로 저장
```

### 8.4 스니펫 문제

#### 문제: 스니펫 실행 시 오류
```
원인:
- 서버 환경이 다름
- 명령어 경로 차이
- 권한 문제

해결:
1. 스니펫 편집으로 환경에 맞게 수정
2. sudo 추가/제거
3. 경로 수정
```

### 8.5 설정 문제

#### 문제: 설정이 저장 안됨
```
확인:
1. 프로그램 권한
2. 디스크 공간
3. 바이러스 백신 간섭

해결:
관리자 권한으로 실행
```

#### 문제: 비밀번호 복호화 실패
```
원인:
다른 Windows 계정에서 생성된 설정 파일

해결:
해당 계정에서 다시 설정하거나
설정 파일 삭제 후 재설정
```

---

## 📚 추가 리소스

- [설치 가이드](INSTALLATION.md)
- [FAQ](FAQ.md)
- [기여 가이드](../CONTRIBUTING.md)
- [GitHub Issues](https://github.com/yourusername/linuxserverai/issues)

---

## 💬 피드백

사용 중 문제가 있거나 개선 제안이 있으시면:
- [GitHub Issues](https://github.com/yourusername/linuxserverai/issues)에 제보
- [GitHub Discussions](https://github.com/yourusername/linuxserverai/discussions)에서 토론

---

**버전**: 2.0
**최종 업데이트**: 2024-11-17
**작성자**: Linux Server AI Team
