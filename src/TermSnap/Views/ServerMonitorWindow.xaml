<Window x:Class="TermSnap.Views.ServerMonitorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="{DynamicResource ServerMonitor.Title}"
        Height="800"
        Width="1000"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource MaterialDesignPaper}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 제목 -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <TextBlock Text="{DynamicResource ServerMonitor.Title}"
                       FontSize="20"
                       FontWeight="Bold"/>
            <Button Content="{DynamicResource Common.Refresh}"
                    Width="100"
                    Margin="20,0,0,0"
                    Click="RefreshButton_Click"
                    Style="{StaticResource MaterialDesignRaisedButton}"/>
            <CheckBox x:Name="AutoRefreshCheckBox"
                      Content="{DynamicResource ServerMonitor.AutoRefresh}"
                      Margin="15,0,0,0"
                      VerticalAlignment="Center"
                      Checked="AutoRefreshCheckBox_Changed"
                      Unchecked="AutoRefreshCheckBox_Changed"/>
        </StackPanel>

        <!-- 시스템 정보 -->
        <Border Grid.Row="1"
                Padding="15"
                Background="{DynamicResource MaterialDesignDivider}"
                CornerRadius="5"
                Margin="0,0,0,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock Text="{DynamicResource ServerMonitor.SystemInfo}"
                               FontWeight="Bold"
                               FontSize="14"
                               Margin="0,0,0,10"
                               Foreground="{DynamicResource MaterialDesignBody}"/>
                    <TextBlock x:Name="OsInfoText" Text="{DynamicResource ServerMonitor.OSInfo}" Margin="0,2" Foreground="{DynamicResource MaterialDesignBody}"/>
                    <TextBlock x:Name="KernelVersionText" Text="{DynamicResource ServerMonitor.KernelVersion}" Margin="0,2" Foreground="{DynamicResource MaterialDesignBody}"/>
                    <TextBlock x:Name="UptimeText" Text="{DynamicResource ServerMonitor.Uptime}" Margin="0,2" Foreground="{DynamicResource MaterialDesignBody}"/>
                </StackPanel>

                <StackPanel Grid.Column="1">
                    <TextBlock Text="{DynamicResource ServerMonitor.Network}"
                               FontWeight="Bold"
                               FontSize="14"
                               Margin="0,0,0,10"
                               Foreground="{DynamicResource MaterialDesignBody}"/>
                    <TextBlock x:Name="NetworkRxText" Text="{DynamicResource ServerMonitor.NetworkRx}" Margin="0,2" Foreground="{DynamicResource MaterialDesignBody}"/>
                    <TextBlock x:Name="NetworkTxText" Text="{DynamicResource ServerMonitor.NetworkTx}" Margin="0,2" Foreground="{DynamicResource MaterialDesignBody}"/>
                    <TextBlock x:Name="LoadAverageText" Text="{DynamicResource ServerMonitor.LoadAverage}" Margin="0,2" Foreground="{DynamicResource MaterialDesignBody}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 메인 통계 -->
        <Grid Grid.Row="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- CPU, 메모리, 디스크 -->
            <Grid Grid.Row="0" Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- CPU -->
                <Border Grid.Column="0"
                        Padding="15"
                        Background="{DynamicResource MaterialDesignDivider}"
                        CornerRadius="5"
                        Margin="0,0,10,0">
                    <StackPanel>
                        <TextBlock Text="{DynamicResource ServerMonitor.CPUUsage}"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Margin="0,0,0,10"
                                   Foreground="{DynamicResource MaterialDesignBody}"/>
                        <TextBlock x:Name="CpuPercentText"
                                   Text="0%"
                                   FontSize="36"
                                   FontWeight="Bold"
                                   HorizontalAlignment="Center"
                                   Margin="0,10"
                                   Foreground="{DynamicResource MaterialDesignBody}"/>
                        <ProgressBar x:Name="CpuProgressBar"
                                     Height="20"
                                     Minimum="0"
                                     Maximum="100"
                                     Value="0"
                                     Margin="0,10"/>
                        <TextBlock x:Name="ProcessCountText"
                                   Text="{DynamicResource ServerMonitor.ProcessCount}"
                                   HorizontalAlignment="Center"
                                   FontSize="12"
                                   Foreground="{DynamicResource MaterialDesignBodyLight}"/>
                    </StackPanel>
                </Border>

                <!-- 메모리 -->
                <Border Grid.Column="1"
                        Padding="15"
                        Background="{DynamicResource MaterialDesignDivider}"
                        CornerRadius="5"
                        Margin="0,0,10,0">
                    <StackPanel>
                        <TextBlock Text="{DynamicResource ServerMonitor.MemoryUsage}"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Margin="0,0,0,10"
                                   Foreground="{DynamicResource MaterialDesignBody}"/>
                        <TextBlock x:Name="MemoryPercentText"
                                   Text="0%"
                                   FontSize="36"
                                   FontWeight="Bold"
                                   HorizontalAlignment="Center"
                                   Margin="0,10"
                                   Foreground="{DynamicResource MaterialDesignBody}"/>
                        <ProgressBar x:Name="MemoryProgressBar"
                                     Height="20"
                                     Minimum="0"
                                     Maximum="100"
                                     Value="0"
                                     Margin="0,10"/>
                        <TextBlock x:Name="MemoryDetailText"
                                   Text="{DynamicResource ServerMonitor.MemoryDetail}"
                                   HorizontalAlignment="Center"
                                   FontSize="12"
                                   Foreground="{DynamicResource MaterialDesignBodyLight}"/>
                    </StackPanel>
                </Border>

                <!-- 디스크 -->
                <Border Grid.Column="2"
                        Padding="15"
                        Background="{DynamicResource MaterialDesignDivider}"
                        CornerRadius="5">
                    <StackPanel>
                        <TextBlock Text="{DynamicResource ServerMonitor.DiskUsage}"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Margin="0,0,0,10"
                                   Foreground="{DynamicResource MaterialDesignBody}"/>
                        <TextBlock x:Name="DiskPercentText"
                                   Text="0%"
                                   FontSize="36"
                                   FontWeight="Bold"
                                   HorizontalAlignment="Center"
                                   Margin="0,10"
                                   Foreground="{DynamicResource MaterialDesignBody}"/>
                        <ProgressBar x:Name="DiskProgressBar"
                                     Height="20"
                                     Minimum="0"
                                     Maximum="100"
                                     Value="0"
                                     Margin="0,10"/>
                        <TextBlock x:Name="DiskDetailText"
                                   Text="{DynamicResource ServerMonitor.DiskDetail}"
                                   HorizontalAlignment="Center"
                                   FontSize="12"
                                   Foreground="{DynamicResource MaterialDesignBodyLight}"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- 서비스 및 프로세스 -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- 서비스 모니터링 -->
                <Border Grid.Column="0"
                        Padding="15"
                        Background="{DynamicResource MaterialDesignDivider}"
                        CornerRadius="5"
                        Margin="0,0,10,0">
                    <StackPanel>
                        <TextBlock Text="{DynamicResource ServerMonitor.Services}"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Margin="0,0,0,10"
                                   Foreground="{DynamicResource MaterialDesignBody}"/>
                        <DataGrid x:Name="ServicesDataGrid"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="None"
                                  Background="Transparent"
                                  Foreground="{DynamicResource MaterialDesignBody}"
                                  CanUserAddRows="False"
                                  Height="200">
                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}">
                                    <Setter Property="Foreground" Value="{DynamicResource MaterialDesignBody}"/>
                                </Style>
                            </DataGrid.ColumnHeaderStyle>
                            <DataGrid.CellStyle>
                                <Style TargetType="DataGridCell" BasedOn="{StaticResource MaterialDesignDataGridCell}">
                                    <Setter Property="Foreground" Value="{DynamicResource MaterialDesignBody}"/>
                                </Style>
                            </DataGrid.CellStyle>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="{DynamicResource ServerMonitor.Service}" Binding="{Binding ServiceName}" Width="*">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="{DynamicResource MaterialDesignBody}"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="{DynamicResource ServerMonitor.ServiceStatus}" Binding="{Binding StatusText}" Width="100">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="{Binding StatusColor}"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="" Binding="{Binding StatusIcon}" Width="40">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="{DynamicResource MaterialDesignBody}"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>

                <!-- 상위 프로세스 -->
                <Border Grid.Column="1"
                        Padding="15"
                        Background="{DynamicResource MaterialDesignDivider}"
                        CornerRadius="5">
                    <StackPanel>
                        <TextBlock Text="{DynamicResource ServerMonitor.TopProcesses}"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Margin="0,0,0,10"
                                   Foreground="{DynamicResource MaterialDesignBody}"/>
                        <ScrollViewer Height="200" VerticalScrollBarVisibility="Auto">
                            <TextBlock x:Name="TopProcessesText"
                                       FontFamily="Consolas"
                                       FontSize="11"
                                       TextWrapping="Wrap"
                                       Foreground="{DynamicResource MaterialDesignBody}"/>
                        </ScrollViewer>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>

        <!-- 하단 정보 -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <TextBlock x:Name="LastUpdatedText"
                       VerticalAlignment="Center"
                       Margin="0,0,20,0"
                       Foreground="{DynamicResource MaterialDesignBodyLight}"/>
            <Button Content="{DynamicResource Common.Close}"
                    Width="100"
                    Click="CloseButton_Click"
                    Style="{StaticResource MaterialDesignOutlinedButton}"/>
        </StackPanel>
    </Grid>
</Window>
