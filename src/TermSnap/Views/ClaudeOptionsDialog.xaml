<Window x:Class="TermSnap.Views.ClaudeOptionsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="{DynamicResource ClaudeOptions.Title}"
        Height="600" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        FontFamily="{materialDesign:MaterialDesignFont}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 헤더 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="{DynamicResource ClaudeOptions.Title}"
                       Style="{StaticResource MaterialDesignHeadline6TextBlock}"/>
            <TextBlock Text="{DynamicResource ClaudeOptions.Subtitle}"
                       Foreground="{DynamicResource MaterialDesignBodyLight}"
                       FontSize="12"
                       Margin="0,4,0,0"/>
        </StackPanel>

        <!-- 옵션 목록 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>

                <!-- 권한 모드 -->
                <TextBlock Text="{DynamicResource ClaudeOptions.PermissionMode}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <ComboBox x:Name="PermissionModeCombo"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          Margin="0,0,0,16"
                          SelectionChanged="OnOptionChanged">
                    <ComboBoxItem Content="{DynamicResource ClaudeOptions.NormalMode}" Tag="" IsSelected="True"/>
                    <ComboBoxItem Content="{DynamicResource ClaudeOptions.AutoMode}" Tag="--dangerously-skip-permissions"/>
                </ComboBox>

                <!-- 모델 선택 -->
                <TextBlock Text="{DynamicResource ClaudeOptions.Model}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <ComboBox x:Name="ModelCombo"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          Margin="0,0,0,16"
                          SelectionChanged="OnOptionChanged">
                    <ComboBoxItem Content="{DynamicResource ClaudeOptions.DefaultModel}" Tag="" IsSelected="True"/>
                    <ComboBoxItem Content="Claude Sonnet 4" Tag="--model claude-sonnet-4-20250514"/>
                    <ComboBoxItem Content="Claude Opus 4" Tag="--model claude-opus-4-20250514"/>
                    <ComboBoxItem Content="Claude 3.5 Sonnet" Tag="--model claude-3-5-sonnet-20241022"/>
                    <ComboBoxItem Content="Claude 3.5 Haiku" Tag="--model claude-3-5-haiku-20241022"/>
                </ComboBox>

                <!-- 출력 형식 -->
                <TextBlock Text="{DynamicResource ClaudeOptions.OutputFormat}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <ComboBox x:Name="OutputFormatCombo"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          Margin="0,0,0,16"
                          SelectionChanged="OnOptionChanged">
                    <ComboBoxItem Content="{DynamicResource ClaudeOptions.InteractiveDefault}" Tag="" IsSelected="True"/>
                    <ComboBoxItem Content="{DynamicResource ClaudeOptions.TextOnly}" Tag="--print"/>
                    <ComboBoxItem Content="{DynamicResource ClaudeOptions.JSONOutput}" Tag="--output-format json"/>
                    <ComboBoxItem Content="{DynamicResource ClaudeOptions.StreamJSON}" Tag="--output-format stream-json"/>
                </ComboBox>

                <!-- 최대 턴 수 -->
                <TextBlock Text="{DynamicResource ClaudeOptions.MaxTurns}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Slider x:Name="MaxTurnsSlider"
                            Minimum="0" Maximum="100"
                            Value="0"
                            TickFrequency="10"
                            IsSnapToTickEnabled="False"
                            ValueChanged="OnOptionChanged"/>
                    <TextBlock Grid.Column="1"
                               Text="{Binding Value, ElementName=MaxTurnsSlider, StringFormat={}{0:0}}"
                               Width="40"
                               TextAlignment="Right"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0"/>
                </Grid>
                <TextBlock Text="{DynamicResource ClaudeOptions.UnlimitedTurns}"
                           FontSize="11"
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           Margin="0,-12,0,16"/>

                <!-- 추가 옵션 체크박스 -->
                <TextBlock Text="{DynamicResource ClaudeOptions.AdditionalOptions}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>

                <CheckBox x:Name="VerboseCheck"
                          Content="{DynamicResource ClaudeOptions.VerboseOutput}"
                          Margin="0,0,0,8"
                          Click="OnOptionChanged"/>

                <CheckBox x:Name="NoConfigCheck"
                          Content="{DynamicResource ClaudeOptions.IgnoreConfig}"
                          Margin="0,0,0,8"
                          Click="OnOptionChanged"/>

                <CheckBox x:Name="ResumeCheck"
                          Content="{DynamicResource ClaudeOptions.ResumePrevious}"
                          Margin="0,0,0,8"
                          Click="OnOptionChanged"/>

                <CheckBox x:Name="ContinueCheck"
                          Content="{DynamicResource ClaudeOptions.ContinueRecent}"
                          Margin="0,0,0,16"
                          Click="OnOptionChanged"/>

                <!-- 시스템 프롬프트 -->
                <TextBlock Text="{DynamicResource ClaudeOptions.SystemPrompt}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <TextBox x:Name="SystemPromptTextBox"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         materialDesign:HintAssist.Hint="{DynamicResource ClaudeOptions.SystemPromptHint}"
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         Height="60"
                         VerticalScrollBarVisibility="Auto"
                         Margin="0,0,0,16"
                         TextChanged="OnOptionChanged"/>

                <!-- 초기 프롬프트 -->
                <TextBlock Text="{DynamicResource ClaudeOptions.InitialPrompt}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <TextBox x:Name="InitialPromptTextBox"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         materialDesign:HintAssist.Hint="{DynamicResource ClaudeOptions.InitialPromptHint}"
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         Height="60"
                         VerticalScrollBarVisibility="Auto"
                         Margin="0,0,0,8"
                         TextChanged="OnOptionChanged"/>

            </StackPanel>
        </ScrollViewer>

        <!-- 생성된 명령어 미리보기 -->
        <Border Grid.Row="2"
                Background="{DynamicResource MaterialDesignToolBarBackground}"
                CornerRadius="4"
                Padding="12"
                Margin="0,16,0,16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="{DynamicResource ClaudeOptions.CommandPreview}"
                           FontWeight="SemiBold"
                           FontSize="11"
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           Margin="0,0,0,4"/>
                <TextBox x:Name="CommandPreviewTextBox"
                         Grid.Row="1"
                         IsReadOnly="True"
                         FontFamily="Consolas"
                         FontSize="12"
                         Background="Transparent"
                         BorderThickness="0"
                         TextWrapping="Wrap"
                         Text="claude"/>
            </Grid>
        </Border>

        <!-- 버튼 -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
                    Content="{DynamicResource ClaudeOptions.Copy}"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Click="CopyCommand_Click"
                    ToolTip="{DynamicResource ClaudeOptions.CopyTooltip}"/>

            <Button Grid.Column="2"
                    Content="{DynamicResource ClaudeOptions.Cancel}"
                    Style="{StaticResource MaterialDesignFlatButton}"
                    IsCancel="True"
                    Click="Cancel_Click"
                    Margin="0,0,8,0"/>

            <Button Grid.Column="3"
                    Content="{DynamicResource ClaudeOptions.Run}"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    IsDefault="True"
                    Click="Run_Click"/>
        </Grid>
    </Grid>
</Window>
