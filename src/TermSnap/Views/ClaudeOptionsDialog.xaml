<Window x:Class="TermSnap.Views.ClaudeOptionsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Claude Code 실행 옵션"
        Height="600" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        FontFamily="{materialDesign:MaterialDesignFont}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 헤더 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="Claude Code 실행 옵션"
                       Style="{StaticResource MaterialDesignHeadline6TextBlock}"/>
            <TextBlock Text="실행할 옵션을 선택하세요"
                       Foreground="{DynamicResource MaterialDesignBodyLight}"
                       FontSize="12"
                       Margin="0,4,0,0"/>
        </StackPanel>

        <!-- 옵션 목록 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>

                <!-- 권한 모드 -->
                <TextBlock Text="권한 모드"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <ComboBox x:Name="PermissionModeCombo"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          Margin="0,0,0,16"
                          SelectionChanged="OnOptionChanged">
                    <ComboBoxItem Content="일반 모드 (권한 확인)" Tag="" IsSelected="True"/>
                    <ComboBoxItem Content="자동 모드 (권한 스킵)" Tag="--dangerously-skip-permissions"/>
                </ComboBox>

                <!-- 모델 선택 -->
                <TextBlock Text="모델"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <ComboBox x:Name="ModelCombo"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          Margin="0,0,0,16"
                          SelectionChanged="OnOptionChanged">
                    <ComboBoxItem Content="기본값 (설정된 모델)" Tag="" IsSelected="True"/>
                    <ComboBoxItem Content="Claude Sonnet 4" Tag="--model claude-sonnet-4-20250514"/>
                    <ComboBoxItem Content="Claude Opus 4" Tag="--model claude-opus-4-20250514"/>
                    <ComboBoxItem Content="Claude 3.5 Sonnet" Tag="--model claude-3-5-sonnet-20241022"/>
                    <ComboBoxItem Content="Claude 3.5 Haiku" Tag="--model claude-3-5-haiku-20241022"/>
                </ComboBox>

                <!-- 출력 형식 -->
                <TextBlock Text="출력 형식"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <ComboBox x:Name="OutputFormatCombo"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          Margin="0,0,0,16"
                          SelectionChanged="OnOptionChanged">
                    <ComboBoxItem Content="대화형 (기본)" Tag="" IsSelected="True"/>
                    <ComboBoxItem Content="텍스트만 출력 (--print)" Tag="--print"/>
                    <ComboBoxItem Content="JSON 출력" Tag="--output-format json"/>
                    <ComboBoxItem Content="스트림 JSON" Tag="--output-format stream-json"/>
                </ComboBox>

                <!-- 최대 턴 수 -->
                <TextBlock Text="최대 턴 수"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Slider x:Name="MaxTurnsSlider"
                            Minimum="0" Maximum="100"
                            Value="0"
                            TickFrequency="10"
                            IsSnapToTickEnabled="False"
                            ValueChanged="OnOptionChanged"/>
                    <TextBlock Grid.Column="1"
                               Text="{Binding Value, ElementName=MaxTurnsSlider, StringFormat={}{0:0}}"
                               Width="40"
                               TextAlignment="Right"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0"/>
                </Grid>
                <TextBlock Text="0 = 무제한"
                           FontSize="11"
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           Margin="0,-12,0,16"/>

                <!-- 추가 옵션 체크박스 -->
                <TextBlock Text="추가 옵션"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>

                <CheckBox x:Name="VerboseCheck"
                          Content="상세 출력 (--verbose)"
                          Margin="0,0,0,8"
                          Click="OnOptionChanged"/>

                <CheckBox x:Name="NoConfigCheck"
                          Content="설정 파일 무시 (--no-config)"
                          Margin="0,0,0,8"
                          Click="OnOptionChanged"/>

                <CheckBox x:Name="ResumeCheck"
                          Content="이전 대화 이어하기 (--resume)"
                          Margin="0,0,0,8"
                          Click="OnOptionChanged"/>

                <CheckBox x:Name="ContinueCheck"
                          Content="가장 최근 대화 계속 (--continue)"
                          Margin="0,0,0,16"
                          Click="OnOptionChanged"/>

                <!-- 시스템 프롬프트 -->
                <TextBlock Text="시스템 프롬프트 (선택사항)"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <TextBox x:Name="SystemPromptTextBox"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         materialDesign:HintAssist.Hint="예: You are a helpful coding assistant..."
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         Height="60"
                         VerticalScrollBarVisibility="Auto"
                         Margin="0,0,0,16"
                         TextChanged="OnOptionChanged"/>

                <!-- 초기 프롬프트 -->
                <TextBlock Text="초기 프롬프트 (선택사항)"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <TextBox x:Name="InitialPromptTextBox"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         materialDesign:HintAssist.Hint="실행 시 바로 전달할 프롬프트..."
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         Height="60"
                         VerticalScrollBarVisibility="Auto"
                         Margin="0,0,0,8"
                         TextChanged="OnOptionChanged"/>

            </StackPanel>
        </ScrollViewer>

        <!-- 생성된 명령어 미리보기 -->
        <Border Grid.Row="2"
                Background="{DynamicResource MaterialDesignToolBarBackground}"
                CornerRadius="4"
                Padding="12"
                Margin="0,16,0,16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="실행 명령어"
                           FontWeight="SemiBold"
                           FontSize="11"
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           Margin="0,0,0,4"/>
                <TextBox x:Name="CommandPreviewTextBox"
                         Grid.Row="1"
                         IsReadOnly="True"
                         FontFamily="Consolas"
                         FontSize="12"
                         Background="Transparent"
                         BorderThickness="0"
                         TextWrapping="Wrap"
                         Text="claude"/>
            </Grid>
        </Border>

        <!-- 버튼 -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
                    Content="복사"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Click="CopyCommand_Click"
                    ToolTip="명령어를 클립보드에 복사"/>

            <Button Grid.Column="2"
                    Content="취소"
                    Style="{StaticResource MaterialDesignFlatButton}"
                    IsCancel="True"
                    Click="Cancel_Click"
                    Margin="0,0,8,0"/>

            <Button Grid.Column="3"
                    Content="실행"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    IsDefault="True"
                    Click="Run_Click"/>
        </Grid>
    </Grid>
</Window>
