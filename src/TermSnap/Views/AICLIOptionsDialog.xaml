<Window x:Class="TermSnap.Views.AICLIOptionsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="{DynamicResource AICLIOptions.Title}"
        Height="550" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        FontFamily="{materialDesign:MaterialDesignFont}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 헤더 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="{DynamicResource AICLIOptions.Title}"
                       Style="{StaticResource MaterialDesignHeadline6TextBlock}"/>
            <TextBlock Text="{DynamicResource AICLIOptions.Subtitle}"
                       Foreground="{DynamicResource MaterialDesignBodyLight}"
                       FontSize="12"
                       Margin="0,4,0,0"/>
        </StackPanel>

        <!-- 옵션 목록 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>

                <!-- AI CLI 선택 -->
                <TextBlock Text="{DynamicResource AICLIOptions.SelectCLI}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <ComboBox x:Name="CLICombo"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          Margin="0,0,0,8"
                          SelectionChanged="OnCLIChanged">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="{Binding IconKind}"
                                                         Width="18" Height="18"
                                                         VerticalAlignment="Center"
                                                         Margin="0,0,8,0"/>
                                <TextBlock Text="{Binding Name}" VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <TextBlock x:Name="CLIDescriptionText"
                           FontSize="11"
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           Margin="0,0,0,16"
                           TextWrapping="Wrap"/>

                <!-- 커스텀 명령어 (custom 선택 시만 표시) -->
                <StackPanel x:Name="CustomCommandPanel" Visibility="Collapsed" Margin="0,0,0,16">
                    <TextBlock Text="{DynamicResource AICLIOptions.CustomCommand}"
                               FontWeight="SemiBold"
                               FontSize="13"
                               Margin="0,0,0,8"/>
                    <TextBox x:Name="CustomCommandTextBox"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="{DynamicResource AICLIOptions.CustomCommandHint}"
                             TextChanged="OnOptionChanged"/>
                </StackPanel>

                <!-- 실행 모드 -->
                <TextBlock Text="{DynamicResource AICLIOptions.ExecutionMode}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>

                <CheckBox x:Name="AutoModeCheck"
                          Margin="0,0,0,4"
                          Click="OnOptionChanged">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{DynamicResource AICLIOptions.AutoMode}"/>
                        <TextBlock x:Name="AutoModeFlagText"
                                   Foreground="{DynamicResource MaterialDesignBodyLight}"
                                   FontSize="11"
                                   Margin="8,0,0,0"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </CheckBox>
                <TextBlock Text="{DynamicResource AICLIOptions.AutoModeWarning}"
                           FontSize="11"
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           Margin="24,0,0,16"/>

                <!-- Claude 전용 옵션 -->
                <StackPanel x:Name="ClaudeOptionsPanel" Margin="0,0,0,16">
                    <TextBlock Text="{DynamicResource AICLIOptions.ClaudeOptions}"
                               FontWeight="SemiBold"
                               FontSize="13"
                               Margin="0,0,0,8"/>

                    <CheckBox x:Name="PrintCheck"
                              Content="{DynamicResource AICLIOptions.PrintOnly}"
                              Margin="0,0,0,8"
                              Click="OnOptionChanged"/>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{DynamicResource AICLIOptions.OutputFormatLabel}"
                                   VerticalAlignment="Center"
                                   Margin="0,0,8,0"/>
                        <ComboBox x:Name="OutputFormatCombo"
                                  Grid.Column="1"
                                  Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                  SelectionChanged="OnComboChanged">
                            <ComboBoxItem Content="{DynamicResource AICLIOptions.DefaultInteractive}" Tag="" IsSelected="True"/>
                            <ComboBoxItem Content="{DynamicResource AICLIOptions.Text}" Tag="--output-format text"/>
                            <ComboBoxItem Content="{DynamicResource AICLIOptions.JSON}" Tag="--output-format json"/>
                            <ComboBoxItem Content="{DynamicResource ClaudeOptions.StreamJSON}" Tag="--output-format stream-json"/>
                        </ComboBox>
                    </Grid>

                    <CheckBox x:Name="VerboseCheck"
                              Content="{DynamicResource ClaudeOptions.VerboseOutput}"
                              Margin="0,0,0,8"
                              Click="OnOptionChanged"/>

                    <CheckBox x:Name="ResumeCheck"
                              Content="{DynamicResource ClaudeOptions.ResumePrevious}"
                              Margin="0,0,0,8"
                              Click="OnOptionChanged"/>

                    <CheckBox x:Name="ContinueCheck"
                              Content="{DynamicResource ClaudeOptions.ContinueRecent}"
                              Margin="0,0,0,8"
                              Click="OnOptionChanged"/>
                </StackPanel>

                <!-- Codex 전용 옵션 -->
                <StackPanel x:Name="CodexOptionsPanel" Visibility="Collapsed" Margin="0,0,0,16">
                    <TextBlock Text="{DynamicResource AICLIOptions.CodexOptions}"
                               FontWeight="SemiBold"
                               FontSize="13"
                               Margin="0,0,0,8"/>

                    <CheckBox x:Name="CodexQuietCheck"
                              Content="{DynamicResource AICLIOptions.QuietMode}"
                              Margin="0,0,0,8"
                              Click="OnOptionChanged"/>
                </StackPanel>

                <!-- Gemini 전용 옵션 -->
                <StackPanel x:Name="GeminiOptionsPanel" Visibility="Collapsed" Margin="0,0,0,16">
                    <TextBlock Text="{DynamicResource AICLIOptions.GeminiOptions}"
                               FontWeight="SemiBold"
                               FontSize="13"
                               Margin="0,0,0,8"/>

                    <CheckBox x:Name="GeminiYoloCheck"
                              Content="{DynamicResource AICLIOptions.YoloMode}"
                              Margin="0,0,0,8"
                              Click="OnOptionChanged"/>
                </StackPanel>

                <!-- Aider 전용 옵션 -->
                <StackPanel x:Name="AiderOptionsPanel" Visibility="Collapsed" Margin="0,0,0,16">
                    <TextBlock Text="{DynamicResource AICLIOptions.AiderOptions}"
                               FontWeight="SemiBold"
                               FontSize="13"
                               Margin="0,0,0,8"/>

                    <CheckBox x:Name="AiderAutoCommitCheck"
                              Content="{DynamicResource AICLIOptions.AutoCommits}"
                              Margin="0,0,0,8"
                              Click="OnOptionChanged"/>

                    <CheckBox x:Name="AiderNoPrettyCheck"
                              Content="{DynamicResource AICLIOptions.NoPretty}"
                              Margin="0,0,0,8"
                              Click="OnOptionChanged"/>
                </StackPanel>

                <!-- 추가 플래그 입력 -->
                <TextBlock Text="{DynamicResource AICLIOptions.AdditionalFlags}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <TextBox x:Name="AdditionalFlagsTextBox"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         materialDesign:HintAssist.Hint="{DynamicResource AICLIOptions.AdditionalFlagsHint}"
                         Margin="0,0,0,16"
                         TextChanged="OnOptionChanged"/>

                <!-- 초기 프롬프트 -->
                <TextBlock Text="{DynamicResource ClaudeOptions.InitialPrompt}"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Margin="0,0,0,8"/>
                <TextBox x:Name="InitialPromptTextBox"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         materialDesign:HintAssist.Hint="{DynamicResource ClaudeOptions.InitialPromptHint}"
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         Height="60"
                         VerticalScrollBarVisibility="Auto"
                         Margin="0,0,0,8"
                         TextChanged="OnOptionChanged"/>

            </StackPanel>
        </ScrollViewer>

        <!-- 생성된 명령어 미리보기 (편집 가능) -->
        <Border Grid.Row="2"
                Background="{DynamicResource MaterialDesignToolBarBackground}"
                CornerRadius="4"
                Padding="12"
                Margin="0,16,0,16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="{DynamicResource ClaudeOptions.CommandPreview}"
                               FontWeight="SemiBold"
                               FontSize="11"
                               Foreground="{DynamicResource MaterialDesignBodyLight}"/>
                    <TextBlock Text="{DynamicResource AICLIOptions.CommandPreviewEditable}"
                               FontSize="10"
                               Foreground="{DynamicResource MaterialDesignBodyLight}"
                               Margin="8,0,0,0"
                               Opacity="0.7"/>
                </StackPanel>
                <TextBox x:Name="CommandPreviewTextBox"
                         Grid.Row="1"
                         FontFamily="Consolas"
                         FontSize="12"
                         Background="Transparent"
                         BorderThickness="0"
                         TextWrapping="Wrap"
                         Text="claude"
                         TextChanged="CommandPreviewTextBox_TextChanged"/>
            </Grid>
        </Border>

        <!-- 버튼 -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
                    Content="{DynamicResource ClaudeOptions.Copy}"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Click="CopyCommand_Click"
                    ToolTip="{DynamicResource ClaudeOptions.CopyTooltip}"/>

            <Button Grid.Column="2"
                    Content="{DynamicResource ClaudeOptions.Cancel}"
                    Style="{StaticResource MaterialDesignFlatButton}"
                    IsCancel="True"
                    Click="Cancel_Click"
                    Margin="0,0,8,0"/>

            <Button Grid.Column="3"
                    Content="{DynamicResource AICLIOptions.OK}"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    IsDefault="True"
                    Click="Run_Click"/>
        </Grid>
    </Grid>
</Window>
