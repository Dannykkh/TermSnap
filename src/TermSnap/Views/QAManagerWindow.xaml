<Window x:Class="TermSnap.Views.QAManagerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="{DynamicResource QAManager.Title}" 
        Height="700" Width="1000"
        WindowStartupLocation="CenterOwner"
        Background="#1E1E1E">

    <Window.Resources>
        <!-- ë‹¤í¬ í…Œë§ˆ ìŠ¤íƒ€ì¼ -->
        <Style x:Key="DarkTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#2D2D30"/>
            <Setter Property="Foreground" Value="#DCDCDC"/>
            <Setter Property="BorderBrush" Value="#3F3F46"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>
        
        <Style x:Key="DarkButton" TargetType="Button">
            <Setter Property="Background" Value="#0E639C"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1177BB"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="#3F3F46"/>
            <Setter Property="Foreground" Value="#DCDCDC"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#505057"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="DangerButton" TargetType="Button">
            <Setter Property="Background" Value="#C42B1C"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#D83B2B"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ìƒë‹¨: ê²€ìƒ‰ ë° í†µê³„ -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- ê²€ìƒ‰ -->
            <Grid Grid.Column="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBox x:Name="SearchTextBox" 
                         Grid.Column="0"
                         Style="{StaticResource DarkTextBox}"
                         Text=""
                         VerticalContentAlignment="Center"
                         KeyDown="SearchTextBox_KeyDown"/>
                
                <Button x:Name="SearchButton"
                        Grid.Column="1"
                        Content="{DynamicResource QAManager.SearchButton}"
                        Style="{StaticResource DarkButton}"
                        Margin="8,0,0,0"
                        Click="SearchButton_Click"/>
            </Grid>

            <!-- í†µê³„ -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="16,0,0,0">
                <TextBlock x:Name="StatsTextBlock" 
                           Foreground="#888" 
                           VerticalAlignment="Center"
                           FontSize="12"/>
            </StackPanel>
        </Grid>

        <!-- ì¤‘ì•™: ë©”ì¸ ì»¨í…ì¸  (ì¢Œ: ëª©ë¡, ìš°: íŽ¸ì§‘) -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" MinWidth="300"/>
                <ColumnDefinition Width="8"/>
                <ColumnDefinition Width="400"/>
            </Grid.ColumnDefinitions>

            <!-- ì¢Œì¸¡: Q&A ëª©ë¡ -->
            <Border Grid.Column="0" Background="#252526" CornerRadius="4">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- ëª©ë¡ í—¤ë” -->
                    <Border Grid.Row="0" Background="#2D2D30" Padding="12,8">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Text="{DynamicResource QAManager.QAList}"
                                       Foreground="#DCDCDC"
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center"/>

                            <Button Grid.Column="1"
                                    Content="{DynamicResource QAManager.AddNew}"
                                    Style="{StaticResource DarkButton}"
                                    Click="AddNewEntry_Click"/>
                        </Grid>
                    </Border>

                    <!-- ëª©ë¡ -->
                    <ListBox x:Name="QAListBox" 
                             Grid.Row="1"
                             Background="Transparent"
                             BorderThickness="0"
                             SelectionChanged="QAListBox_SelectionChanged"
                             ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="12,8" 
                                        BorderBrush="#3F3F46" 
                                        BorderThickness="0,0,0,1"
                                        Background="Transparent">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- ì§ˆë¬¸ -->
                                        <TextBlock Grid.Row="0" 
                                                   Text="{Binding Question}" 
                                                   Foreground="#DCDCDC"
                                                   FontWeight="Medium"
                                                   TextTrimming="CharacterEllipsis"
                                                   MaxWidth="350"/>

                                        <!-- ë‹µë³€ ë¯¸ë¦¬ë³´ê¸° -->
                                        <TextBlock Grid.Row="1" 
                                                   Text="{Binding Answer}" 
                                                   Foreground="#888"
                                                   FontSize="12"
                                                   TextTrimming="CharacterEllipsis"
                                                   MaxWidth="350"
                                                   Margin="0,4,0,0"/>

                                        <!-- ë©”íƒ€ ì •ë³´ -->
                                        <StackPanel Grid.Row="2" 
                                                    Orientation="Horizontal" 
                                                    Margin="0,4,0,0">
                                            <TextBlock Text="{Binding Category, StringFormat='ðŸ“ {0}'}" 
                                                       Foreground="#666"
                                                       FontSize="11"/>
                                            <TextBlock Text="{Binding UseCount, StringFormat=' | ðŸ”¥ {0}íšŒ ì‚¬ìš©'}" 
                                                       Foreground="#666"
                                                       FontSize="11"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Padding" Value="0"/>
                                <Setter Property="Margin" Value="0"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="#094771"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#2D2D30"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ListBox.ItemContainerStyle>
                    </ListBox>
                </Grid>
            </Border>

            <!-- êµ¬ë¶„ì„  -->
            <GridSplitter Grid.Column="1" 
                          Width="8" 
                          Background="Transparent"
                          HorizontalAlignment="Stretch"/>

            <!-- ìš°ì¸¡: íŽ¸ì§‘ íŒ¨ë„ -->
            <Border Grid.Column="2" Background="#252526" CornerRadius="4" Padding="16">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- íŽ¸ì§‘ í—¤ë” -->
                    <TextBlock Grid.Row="0"
                               x:Name="EditHeaderText"
                               Text="{DynamicResource QAManager.EditHeader}"
                               Foreground="#DCDCDC"
                               FontWeight="SemiBold"
                               FontSize="14"
                               Margin="0,0,0,12"/>

                    <!-- ì§ˆë¬¸/ë‹µë³€ ìž…ë ¥ -->
                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0"
                                   Text="{DynamicResource QAManager.Question}"
                                   Foreground="#888"
                                   FontSize="12"
                                   Margin="0,0,0,4"/>
                        <TextBox x:Name="QuestionTextBox"
                                 Grid.Row="1"
                                 Style="{StaticResource DarkTextBox}"
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 VerticalScrollBarVisibility="Auto"/>

                        <TextBlock Grid.Row="2"
                                   Text="{DynamicResource QAManager.Answer}"
                                   Foreground="#888"
                                   FontSize="12"
                                   Margin="0,12,0,4"/>
                        <TextBox x:Name="AnswerTextBox" 
                                 Grid.Row="3"
                                 Style="{StaticResource DarkTextBox}"
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 VerticalScrollBarVisibility="Auto"/>
                    </Grid>

                    <!-- ì¹´í…Œê³ ë¦¬/íƒœê·¸ -->
                    <Grid Grid.Row="2" Margin="0,12,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="8"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="{DynamicResource QAManager.Category}"
                                       Foreground="#888"
                                       FontSize="12"
                                       Margin="0,0,0,4"/>
                            <ComboBox x:Name="CategoryComboBox"
                                      Background="#2D2D30"
                                      Foreground="#DCDCDC"
                                      IsEditable="True"
                                      Padding="8"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="{DynamicResource QAManager.Tags}"
                                       Foreground="#888"
                                       FontSize="12"
                                       Margin="0,0,0,4"/>
                            <TextBox x:Name="TagsTextBox" 
                                     Style="{StaticResource DarkTextBox}"/>
                        </StackPanel>
                    </Grid>

                    <!-- ìž„ë² ë”© ìƒíƒœ -->
                    <StackPanel Grid.Row="3" 
                                Orientation="Horizontal" 
                                Margin="0,12,0,0">
                        <TextBlock x:Name="EmbeddingStatusText" 
                                   Foreground="#888" 
                                   FontSize="11"/>
                    </StackPanel>

                    <!-- ë²„íŠ¼ë“¤ -->
                    <StackPanel Grid.Row="4" 
                                Orientation="Horizontal" 
                                HorizontalAlignment="Right"
                                Margin="0,16,0,0">
                        <Button x:Name="DeleteButton"
                                Content="{DynamicResource QAManager.DeleteButton}"
                                Style="{StaticResource DangerButton}"
                                Click="DeleteButton_Click"
                                Visibility="Collapsed"/>
                        <Button x:Name="CancelButton"
                                Content="{DynamicResource Common.Cancel}"
                                Style="{StaticResource SecondaryButton}"
                                Margin="8,0,0,0"
                                Click="CancelButton_Click"/>
                        <Button x:Name="SaveButton"
                                Content="{DynamicResource QAManager.SaveButton}"
                                Style="{StaticResource DarkButton}"
                                Margin="8,0,0,0"
                                Click="SaveButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <!-- í•˜ë‹¨: ì¶”ê°€ ê¸°ëŠ¥ ë²„íŠ¼ -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Left"
                    Margin="0,16,0,0">
            <Button Content="{DynamicResource QAManager.ImportJson}"
                    Style="{StaticResource SecondaryButton}"
                    Click="ImportJson_Click"/>
            <Button Content="{DynamicResource QAManager.ExportJson}"
                    Style="{StaticResource SecondaryButton}"
                    Margin="8,0,0,0"
                    Click="ExportJson_Click"/>
            <Button x:Name="GenerateEmbeddingsButton"
                    Content="{DynamicResource QAManager.GenerateEmbeddings}"
                    Style="{StaticResource SecondaryButton}"
                    Margin="8,0,0,0"
                    Click="GenerateEmbeddings_Click"/>
        </StackPanel>
    </Grid>
</Window>
