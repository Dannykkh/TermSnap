---
name: 완전배포
description: 버전 릴리즈 완전 자동화 (버전 수정 → 빌드 → 푸시 → GitHub 릴리즈 → master 머지)
trigger: /완전배포
arguments:
  - name: version
    description: 릴리즈 버전 (예: 1.8.1). 생략 시 패치 버전 자동 증가
    required: false
---

# Release Workflow

TermSnap 릴리즈 자동화 커맨드입니다.

## 워크플로우

1. **버전 확인 및 수정**
   - `src/TermSnap/TermSnap.csproj`의 `<Version>` 업데이트
   - `installer/termsnap-setup.iss`의 `AppVersion` 업데이트

2. **릴리즈 노트 작성**
   - `git log`로 마지막 릴리즈 이후 커밋 확인
   - `CHANGELOG.md` 또는 릴리즈 노트 생성

3. **README 업데이트** (필요시)
   - 새 기능이나 변경사항이 있으면 README.md 업데이트

4. **빌드**
   ```bash
   dotnet publish src/TermSnap/TermSnap.csproj -c Release -r win-x64 --self-contained
   ```

5. **인스톨러 빌드** (Inno Setup)
   ```bash
   "C:\Program Files (x86)\Inno Setup 6\ISCC.exe" installer/termsnap-setup.iss
   ```

6. **커밋 및 푸시**
   ```bash
   git add -A
   git commit -m "release: v{version} - {summary}"
   git push origin develop
   ```

7. **GitHub 릴리즈 생성**
   ```bash
   gh release create v{version} installer/Output/TermSnap-Setup-{version}.exe \
     --title "v{version}" \
     --notes "{release_notes}"
   ```

8. **master 머지**
   ```bash
   git checkout master
   git merge develop
   git push origin master
   git checkout develop
   ```

## 사용법

```
/완전배포              # 패치 버전 자동 증가 (1.8.0 → 1.8.1)
/완전배포 1.9.0        # 특정 버전으로 릴리즈
/완전배포 2.0.0        # 메이저 버전 릴리즈
```

## 체크리스트

릴리즈 전 확인사항:
- [ ] 모든 기능이 정상 동작하는지 테스트
- [ ] 빌드 오류 없음
- [ ] develop 브랜치에서 작업 중인지 확인
- [ ] 커밋되지 않은 변경사항 확인

## 파일 위치

| 파일 | 용도 |
|------|------|
| `src/TermSnap/TermSnap.csproj` | 앱 버전 정의 |
| `installer/termsnap-setup.iss` | Inno Setup 인스톨러 스크립트 |
| `README.md` | 프로젝트 설명 |
| `CHANGELOG.md` | 변경 이력 (선택) |

## 실행 순서

1. 버전 인자가 없으면 현재 버전에서 패치 버전 +1
2. csproj, iss 파일 버전 수정
3. 릴리즈 노트 생성 (최근 커밋 기반)
4. README 업데이트 필요 여부 확인
5. Release 빌드 수행
6. Inno Setup으로 인스톨러 생성
7. 변경사항 커밋 및 푸시
8. GitHub 릴리즈 생성 + 인스톨러 업로드
9. master 브랜치에 머지
10. develop 브랜치로 복귀
